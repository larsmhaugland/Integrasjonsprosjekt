FROM php:7.4-apache
MAINTAINER noen

#Remove default apache website
RUN rm -rf /usr/local/apache2/htdocs/*

#Copy website to apache root
COPY Webserver /usr/local/apache2/htdocs/

RUN mv /usr/local/apache2/htdocs/HTTPS /

#Copy custom apache config
RUN mv /usr/local/apache2/htdocs/custom_apache.conf /usr/local/apache2/conf/httpd.conf
RUN echo "date.timezone = 'Europe/Oslo'" > /usr/local/etc/php/conf.d/timezone.ini
RUN a2enmod rewrite

#Expose ports
EXPOSE 80
EXPOSE 443

#Run apache in foreground
CMD ["apachectl", "-D", "FOREGROUND"]
